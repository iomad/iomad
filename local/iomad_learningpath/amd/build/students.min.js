define(["jquery","jqueryui","core/config","core/ajax","core/notification"],function(a,b,c,d,e){return{init:function(b,c){function f(b){if(a("#prospectivelist li").remove(),!b.length)return void a("#noprospective").show();if(a("#noprospective").hide(),b.length>30)return void a("#toomanyprospective").show();a("#toomanyprospective").hide();var c=[];a.each(b,function(a,b){c.push('<li class="text-truncate" data-userid="'+b.id+'"><i class="fa fa-user"></i> '+b.fullname+"</li>")}),a("#prospectivelist").append(c.join(""))}function g(){var g=a("#userfilter").val();d.call([{methodname:"local_iomad_learningpath_getprospectiveusers",args:{companyid:b,pathid:c,filter:g},done:function(a){f(a)},fail:e.exception}])}function h(b){if(a("#pathuserlist li").remove(),!b.length)return void a("#nopathusers").show();a("#nopathusers").hide();var c=[];a.each(b,function(a,b){c.push('<li class="text-truncate" data-userid="'+b.id+'"><i class="fa fa-user"></i> '+b.fullname+"</li>")}),a("#pathuserlist").append(c.join(""))}function i(){d.call([{methodname:"local_iomad_learningpath_getusers",args:{companyid:b,pathid:c},done:function(a){h(a)},fail:e.exception}])}a(window).on("load",g("")),a("#userfilter").on("input",function(){g()}),a("#prospectivelist, #pathuserlist").on("mouseenter","li",function(){a(this).addClass("text-primary")}),a("#prospectivelist, #pathuserlist").on("mouseleave","li",function(){a(this).removeClass("text-primary")}),a(window).on("load",i()),a("#prospectivelist").on("click","li",function(){var b=a(this).data("userid");d.call([{methodname:"local_iomad_learningpath_addusers",args:{pathid:c,userids:[b]},done:function(){i(),g()},fail:e.exception}])}),a("#pathuserlist").on("click","li",function(){var b=a(this).data("userid");d.call([{methodname:"local_iomad_learningpath_removeusers",args:{pathid:c,userids:[b]},done:function(){i(),g()},fail:e.exception}])})}}});