{"version":3,"sources":["../src/tooltip.js"],"names":["define","$","Tooltip","selector","_regionSelector","each","index","element","tooltipId","attr","tooltipele","document","getElementById","correctRole","hide","on","_handleFocus","bind","_handleMouseOver","_handleMouseOut","_handleBlur","_handleKeyDown","prototype","_showTooltip","e","triggerElement","target","show","is","inner","append","contents","addClass","pos","offset","top","height","_hideTooltip","which"],"mappings":"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","sourcesContent":["define(['jquery'], function($) {\n\n    /**\n     * Tooltip class.\n     *\n     * @param {String} selector The css selector for the node(s) to enhance with tooltips.\n     */\n    var Tooltip = function(selector) {\n        // Tooltip code matches: http://www.w3.org/WAI/PF/aria-practices/#tooltip\n        this._regionSelector = selector;\n\n        // For each node matching the selector - find an aria-describedby attribute pointing to an role=\"tooltip\" element.\n\n        $(this._regionSelector).each(function(index, element) {\n            var tooltipId = $(element).attr('aria-describedby');\n            if (tooltipId) {\n                var tooltipele = document.getElementById(tooltipId);\n                if (tooltipele) {\n                    var correctRole = $(tooltipele).attr('role') == 'tooltip';\n\n                    if (correctRole) {\n                        $(tooltipele).hide();\n                        // Ensure the trigger for the tooltip is keyboard focusable.\n                        $(element).attr('tabindex', '0');\n                    }\n\n                    // Attach listeners.\n                    $(element).on('focus', this._handleFocus.bind(this));\n                    $(element).on('mouseover', this._handleMouseOver.bind(this));\n                    $(element).on('mouseout', this._handleMouseOut.bind(this));\n                    $(element).on('blur', this._handleBlur.bind(this));\n                    $(element).on('keydown', this._handleKeyDown.bind(this));\n                }\n            }\n        }.bind(this));\n    };\n\n    /** @type {String} Selector for the page region containing the user navigation. */\n    Tooltip.prototype._regionSelector = null;\n\n    /**\n     * Find the tooltip referred to by this element and show it.\n     *\n     * @param {Event} e\n     */\n    Tooltip.prototype._showTooltip = function(e) {\n        var triggerElement = $(e.target);\n        var tooltipId = triggerElement.attr('aria-describedby');\n        if (tooltipId) {\n            var tooltipele = $(document.getElementById(tooltipId));\n\n            tooltipele.show();\n            tooltipele.attr('aria-hidden', 'false');\n\n            if (!tooltipele.is('.tooltip')) {\n                // Change the markup to a bootstrap tooltip.\n                var inner = $('<div class=\"tooltip-inner\"></div>');\n                inner.append(tooltipele.contents());\n                tooltipele.append(inner);\n                tooltipele.addClass('tooltip');\n                tooltipele.addClass('bottom');\n                tooltipele.append('<div class=\"tooltip-arrow\"></div>');\n            }\n            var pos = triggerElement.offset();\n            pos.top += triggerElement.height() + 10;\n            $(tooltipele).offset(pos);\n        }\n    };\n\n    /**\n     * Find the tooltip referred to by this element and hide it.\n     *\n     * @param {Event} e\n     */\n    Tooltip.prototype._hideTooltip = function(e) {\n        var triggerElement = $(e.target);\n        var tooltipId = triggerElement.attr('aria-describedby');\n        if (tooltipId) {\n            var tooltipele = document.getElementById(tooltipId);\n\n            $(tooltipele).hide();\n            $(tooltipele).attr('aria-hidden', 'true');\n        }\n    };\n\n    /**\n     * Listener for focus events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleFocus = function(e) {\n        this._showTooltip(e);\n    };\n\n    /**\n     * Listener for keydown events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleKeyDown = function(e) {\n        if (e.which == 27) {\n            this._hideTooltip(e);\n        }\n    };\n\n    /**\n     * Listener for mouseover events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleMouseOver = function(e) {\n        this._showTooltip(e);\n    };\n\n    /**\n     * Listener for mouseout events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleMouseOut = function(e) {\n        var triggerElement = $(e.target);\n\n        if (!triggerElement.is(\":focus\")) {\n            this._hideTooltip(e);\n        }\n    };\n\n    /**\n     * Listener for blur events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleBlur = function(e) {\n        this._hideTooltip(e);\n    };\n\n    return Tooltip;\n});\n"],"file":"tooltip.min.js"}