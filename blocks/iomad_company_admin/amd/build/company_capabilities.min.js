define(["jquery","core/ajax","core/notification","core/modal_factory","core/modal_events","core/str"],function(a,b,c,d,e,f){return{init:function(g,h,i){a(".capabilities-checkbox").on("change",function(){var d=a(this).data("capability"),e=a(this).prop("checked");b.call([{methodname:"block_iomad_company_admin_restrict_capability",args:{capability:d,roleid:i,companyid:g,allow:e,templateid:h},fail:c.exception}])}),a("a.template-delete").on("click",function(g){var h=a(g.currentTarget),i=[{key:"deleteroletemplatefull",component:"block_iomad_company_admin"},{key:"deleteroletemplate",component:"block_iomad_company_admin"},{key:"delete"}];f.get_strings(i).then(function(a){d.create({type:d.types.SAVE_CANCEL,title:a[1]+'  "<b>'+h.data("name")+'</b>"',body:a[0]}).then(function(d){d.setSaveButtonText(a[2]);var f=d.getRoot();f.on(e.save,function(){var a=h.data("templateid");b.call([{methodname:"block_iomad_company_admin_capability_delete_template",args:{templateid:a},done:function(){location.reload()},fail:c.exception}])}),d.show()})})})}}});