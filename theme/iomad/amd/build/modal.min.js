"use strict";function _typeof2(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof2=function(a){return typeof a}}else{_typeof2=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof2(a)}define ("theme_iomad/modal",["exports","jquery","./util"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var k=d(b),l=d(c);function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if("function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)){e=function(a){return _typeof2(a)}}else{e=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof2(a)}}return e(a)}function f(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);if("function"==typeof Object.getOwnPropertySymbols){d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))}d.forEach(function(b){g(a,b,c[b])})}return a}function g(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}function h(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function i(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function j(a,b,c){if(b)i(a.prototype,b);if(c)i(a,c);return a}var m="bs.modal",n=".".concat(m),o=k.default.fn.modal,p={backdrop:!0,keyboard:!0,focus:!0,show:!0},q={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},r={HIDE:"hide".concat(n),HIDDEN:"hidden".concat(n),SHOW:"show".concat(n),SHOWN:"shown".concat(n),FOCUSIN:"focusin".concat(n),RESIZE:"resize".concat(n),CLICK_DISMISS:"click.dismiss".concat(n),KEYDOWN_DISMISS:"keydown.dismiss".concat(n),MOUSEUP_DISMISS:"mouseup.dismiss".concat(n),MOUSEDOWN_DISMISS:"mousedown.dismiss".concat(n),CLICK_DATA_API:"click".concat(n).concat(".data-api")},s={SCROLLABLE:"modal-dialog-scrollable",SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},t={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:"[data-toggle=\"modal\"]",DATA_DISMISS:"[data-dismiss=\"modal\"]",FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},u=function(){function a(b,c){h(this,a);this._config=this._getConfig(c);this._element=b;this._dialog=b.querySelector(t.DIALOG);this._backdrop=null;this._isShown=!1;this._isBodyOverflowing=!1;this._ignoreBackdropClick=!1;this._isTransitioning=!1;this._scrollbarWidth=0}j(a,[{key:"toggle",value:function(a){return this._isShown?this.hide():this.show(a)}},{key:"show",value:function(a){var b=this;if(this._isShown||this._isTransitioning){return}if((0,k.default)(this._element).hasClass(s.FADE)){this._isTransitioning=!0}var c=k.default.Event(r.SHOW,{relatedTarget:a});(0,k.default)(this._element).trigger(c);if(this._isShown||c.isDefaultPrevented()){return}this._isShown=!0;this._checkScrollbar();this._setScrollbar();this._adjustDialog();this._setEscapeEvent();this._setResizeEvent();(0,k.default)(this._element).on(r.CLICK_DISMISS,t.DATA_DISMISS,function(a){return b.hide(a)});(0,k.default)(this._dialog).on(r.MOUSEDOWN_DISMISS,function(){(0,k.default)(b._element).one(r.MOUSEUP_DISMISS,function(a){if((0,k.default)(a.target).is(b._element)){b._ignoreBackdropClick=!0}})});this._showBackdrop(function(){return b._showElement(a)})}},{key:"hide",value:function(a){var b=this;if(a){a.preventDefault()}if(!this._isShown||this._isTransitioning){return}var c=k.default.Event(r.HIDE);(0,k.default)(this._element).trigger(c);if(!this._isShown||c.isDefaultPrevented()){return}this._isShown=!1;var d=(0,k.default)(this._element).hasClass(s.FADE);if(d){this._isTransitioning=!0}this._setEscapeEvent();this._setResizeEvent();(0,k.default)(document).off(r.FOCUSIN);(0,k.default)(this._element).removeClass(s.SHOW);(0,k.default)(this._element).off(r.CLICK_DISMISS);(0,k.default)(this._dialog).off(r.MOUSEDOWN_DISMISS);if(d){var e=l.default.getTransitionDurationFromElement(this._element);(0,k.default)(this._element).one(l.default.TRANSITION_END,function(a){return b._hideModal(a)}).emulateTransitionEnd(e)}else{this._hideModal()}}},{key:"dispose",value:function(){[window,this._element,this._dialog].forEach(function(a){return(0,k.default)(a).off(n)});(0,k.default)(document).off(r.FOCUSIN);k.default.removeData(this._element,m);this._config=null;this._element=null;this._dialog=null;this._backdrop=null;this._isShown=null;this._isBodyOverflowing=null;this._ignoreBackdropClick=null;this._isTransitioning=null;this._scrollbarWidth=null}},{key:"handleUpdate",value:function(){this._adjustDialog()}},{key:"_getConfig",value:function(a){a=f({},p,a);l.default.typeCheckConfig("modal",a,q);return a}},{key:"_showElement",value:function(a){var b=this,c=(0,k.default)(this._element).hasClass(s.FADE);if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)}this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",!0);if((0,k.default)(this._dialog).hasClass(s.SCROLLABLE)){this._dialog.querySelector(t.MODAL_BODY).scrollTop=0}else{this._element.scrollTop=0}if(c){l.default.reflow(this._element)}(0,k.default)(this._element).addClass(s.SHOW);if(this._config.focus){this._enforceFocus()}var d=k.default.Event(r.SHOWN,{relatedTarget:a}),e=function(){if(b._config.focus){b._element.focus()}b._isTransitioning=!1;(0,k.default)(b._element).trigger(d)};if(c){var f=l.default.getTransitionDurationFromElement(this._dialog);(0,k.default)(this._dialog).one(l.default.TRANSITION_END,e).emulateTransitionEnd(f)}else{e()}}},{key:"_enforceFocus",value:function(){var a=this;(0,k.default)(document).off(r.FOCUSIN).on(r.FOCUSIN,function(b){if(document!==b.target&&a._element!==b.target&&0===(0,k.default)(a._element).has(b.target).length){a._element.focus()}})}},{key:"_setEscapeEvent",value:function(){var a=this;if(this._isShown&&this._config.keyboard){(0,k.default)(this._element).on(r.KEYDOWN_DISMISS,function(b){if(b.which===27){b.preventDefault();a.hide()}})}else if(!this._isShown){(0,k.default)(this._element).off(r.KEYDOWN_DISMISS)}}},{key:"_setResizeEvent",value:function(){var a=this;if(this._isShown){(0,k.default)(window).on(r.RESIZE,function(b){return a.handleUpdate(b)})}else{(0,k.default)(window).off(r.RESIZE)}}},{key:"_hideModal",value:function(){var a=this;this._element.style.display="none";this._element.setAttribute("aria-hidden",!0);this._element.removeAttribute("aria-modal");this._isTransitioning=!1;this._showBackdrop(function(){(0,k.default)(document.body).removeClass(s.OPEN);a._resetAdjustments();a._resetScrollbar();(0,k.default)(a._element).trigger(r.HIDDEN)})}},{key:"_removeBackdrop",value:function(){if(this._backdrop){(0,k.default)(this._backdrop).remove();this._backdrop=null}}},{key:"_showBackdrop",value:function(a){var b=this,c=(0,k.default)(this._element).hasClass(s.FADE)?s.FADE:"";if(this._isShown&&this._config.backdrop){this._backdrop=document.createElement("div");this._backdrop.className=s.BACKDROP;if(c){this._backdrop.classList.add(c)}(0,k.default)(this._backdrop).appendTo(document.body);(0,k.default)(this._element).on(r.CLICK_DISMISS,function(a){if(b._ignoreBackdropClick){b._ignoreBackdropClick=!1;return}if(a.target!==a.currentTarget){return}if("static"===b._config.backdrop){b._element.focus()}else{b.hide()}});if(c){l.default.reflow(this._backdrop)}(0,k.default)(this._backdrop).addClass(s.SHOW);if(!a){return}if(!c){a();return}var d=l.default.getTransitionDurationFromElement(this._backdrop);(0,k.default)(this._backdrop).one(l.default.TRANSITION_END,a).emulateTransitionEnd(d)}else if(!this._isShown&&this._backdrop){(0,k.default)(this._backdrop).removeClass(s.SHOW);var e=function(){b._removeBackdrop();if(a){a()}};if((0,k.default)(this._element).hasClass(s.FADE)){var f=l.default.getTransitionDurationFromElement(this._backdrop);(0,k.default)(this._backdrop).one(l.default.TRANSITION_END,e).emulateTransitionEnd(f)}else{e()}}else if(a){a()}}},{key:"_adjustDialog",value:function(){var a=this._element.scrollHeight>document.documentElement.clientHeight;if(!this._isBodyOverflowing&&a){this._element.style.paddingLeft="".concat(this._scrollbarWidth,"px")}if(this._isBodyOverflowing&&!a){this._element.style.paddingRight="".concat(this._scrollbarWidth,"px")}}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="";this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){var a=document.body.getBoundingClientRect();this._isBodyOverflowing=a.left+a.right<window.innerWidth;this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var a=this;if(this._isBodyOverflowing){var b=[].slice.call(document.querySelectorAll(t.FIXED_CONTENT)),c=[].slice.call(document.querySelectorAll(t.STICKY_CONTENT));(0,k.default)(b).each(function(b,c){var d=c.style.paddingRight,e=(0,k.default)(c).css("padding-right");(0,k.default)(c).data("padding-right",d).css("padding-right","".concat(parseFloat(e)+a._scrollbarWidth,"px"))});(0,k.default)(c).each(function(b,c){var d=c.style.marginRight,e=(0,k.default)(c).css("margin-right");(0,k.default)(c).data("margin-right",d).css("margin-right","".concat(parseFloat(e)-a._scrollbarWidth,"px"))});var d=document.body.style.paddingRight,e=(0,k.default)(document.body).css("padding-right");(0,k.default)(document.body).data("padding-right",d).css("padding-right","".concat(parseFloat(e)+this._scrollbarWidth,"px"))}(0,k.default)(document.body).addClass(s.OPEN)}},{key:"_resetScrollbar",value:function(){var a=[].slice.call(document.querySelectorAll(t.FIXED_CONTENT));(0,k.default)(a).each(function(a,b){var c=(0,k.default)(b).data("padding-right");(0,k.default)(b).removeData("padding-right");b.style.paddingRight=c?c:""});var b=[].slice.call(document.querySelectorAll("".concat(t.STICKY_CONTENT)));(0,k.default)(b).each(function(a,b){var c=(0,k.default)(b).data("margin-right");if("undefined"!=typeof c){(0,k.default)(b).css("margin-right",c).removeData("margin-right")}});var c=(0,k.default)(document.body).data("padding-right");(0,k.default)(document.body).removeData("padding-right");document.body.style.paddingRight=c?c:""}},{key:"_getScrollbarWidth",value:function(){var a=document.createElement("div");a.className=s.SCROLLBAR_MEASURER;document.body.appendChild(a);var b=a.getBoundingClientRect().width-a.clientWidth;document.body.removeChild(a);return b}}],[{key:"_jQueryInterface",value:function(b,c){return this.each(function(){var d=(0,k.default)(this).data(m),g=f({},p,(0,k.default)(this).data(),"object"===e(b)&&b?b:{});if(!d){d=new a(this,g);(0,k.default)(this).data(m,d)}if("string"==typeof b){if("undefined"==typeof d[b]){throw new TypeError("No method named \"".concat(b,"\""))}d[b](c)}else if(g.show){d.show(c)}})}},{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return p}}]);return a}();(0,k.default)(document).on(r.CLICK_DATA_API,t.DATA_TOGGLE,function(a){var b=this,c,d=l.default.getSelectorFromElement(this);if(d){c=document.querySelector(d)}var e=(0,k.default)(c).data(m)?"toggle":f({},(0,k.default)(c).data(),(0,k.default)(this).data());if("A"===this.tagName||"AREA"===this.tagName){a.preventDefault()}var g=(0,k.default)(c).one(r.SHOW,function(a){if(a.isDefaultPrevented()){return}g.one(r.HIDDEN,function(){if((0,k.default)(b).is(":visible")){b.focus()}})});u._jQueryInterface.call((0,k.default)(c),e,this)});k.default.fn.modal=u._jQueryInterface;k.default.fn.modal.Constructor=u;k.default.fn.modal.noConflict=function(){k.default.fn.modal=o;return u._jQueryInterface};a.default=u;return a.default});
//# sourceMappingURL=modal.min.js.map
